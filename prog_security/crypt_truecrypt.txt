# vim:ts=4
# program: Using to note the knowledge about TrueCrypt and VeraCrypt in Ubuntu
# made by: Engells
# date: Feb 20, 2013
# content: Just for memo



序言：
-------------------------
本文章介紹TrueCrypt的使用方法，適用於：
	*加密你的移動硬碟或隨身碟
	*建立加密虛擬硬碟
	*Windows/Linux/Mac下硬碟加密
	*隱藏分區和操作系統，提供否認力

許多隨身碟保護程序起不了真正數據保護作用，要麼僅僅掩飾文件的存在，要麼加密系數太弱，容易蠻力破解。使用這些加密工具並不能有效地保護你的銀行信用卡信息，個人資料，知識產權，以及其他機密文件，並且有威脅逼迫下不得不交出密匙的風險。

本文介紹的加密方法加密系數極高，使用目前世界上最快的超級計算機蠻力破解大約耗費 20 年時間。本文介紹的加密方式還提供隱藏分區的否認力，即當你受到逼迫時，可以交出殼分區的密碼，但可以否認隱藏分區的存在，而對方也絕對無法證明該分區的存在。



TrueCrypt
-------------------------
TrueCrypt 是開源免費軟件。可以到其官方網站上下載最新版本，http://www.truecrypt.org/downloads.php。下載後請驗證其電子簽名，因為你的電腦可能遭到攻擊，下載的程序可能遭到篡改，加入了木馬或泄漏你密匙的程序。驗證方法很簡單，在Windows下，右健該程序，點擊屬性，點擊電子簽名，如果看到正確的簽名者，則表示該程序是幹淨的。

安裝過程中，建議你選擇 Extract，這樣你可以拷貝整個 TrueCrypt 程序文件夾到你的移動儲存設備，可在別的計算機上使用，俗稱綠色軟件。



建立一個加密分區
-------------------------
有以下幾種選擇：
	*建立虛擬分區，把整個分區制作成一個文件，建議這麼做，因為你可以隨意移動或複制該文件
	*加密一個物理分區，如整個硬碟E區
	*加密操作系統分區



建立隱藏加密分區：
-------------------------
你可以建立兩種加密分區，一是普通加密分區，二是隱藏加密分區。下面僅介紹隱藏加密分區：
隱藏加密分區其實是一個普通加密分區的一部分。由於硬碟的空白部分理論上是隨機數據，把隱藏加密分區（加了密的數據）放在普通加密分區的空白部分後，別人無法區分到底哪一部分是隨機數據，哪一部分是隱藏加密分區，更不能使用與普通加密分區一樣的密匙來解密隱藏分區的數據。而只有你知道該隱藏分區的存在以及其密匙，所以只有你知道隱藏分區的位置以及其大小。如果你堅決否認該分區的存在，對方看到的只是隨機數據，所以無法證明該隱藏分區的存在，此為否認力。

首先執行TrueCrypt
> Create Volume > Createa file container > Hidden TrueCrypt Volume > NormalMode > 選擇一個位置儲存該文件。

現在建立殼分區作為普通的加密分區，選擇AES作為加密算法，SHA512作為Hash算法。然後制定該分區的大小，注意隱藏分區的大小永遠小於其殼分區的大小，所以如果你需要1G的隱藏分區儲存空間，你應該選擇1G以上的殼分區大小。

假如你選擇了1.5G作為該普通分區的大小，那麼你將可以在隱藏分區內儲存1G的數據，在普通分區內實際可儲存512MB的數據。如果你儲存太多，你將覆蓋隱藏分區，造成永久性數據破壞。操作系統並不知道那裏有個隱藏分區，因而誤認為空白空間，不過有解決辦法，請往後看。

下一步為殼分區選擇一個密碼。如果你被問到是否需要儲存大文件，請選擇否，並在下一步選擇FAT作為文件格式，此舉可確保隱藏分區有足夠的空間。然後你可以開始格式化，格式化會往殼分區內寫入隨機數據（空白空間）。

接下來建立隱藏分區，可選擇一個強一點的加密算法，如Sperpent-TwoFish-AES，其實際上是使用了三種算法進行層疊加密。

下一步制定隱藏分區的大小，下一步制定一個強密碼（與剛才的殼分區密碼不同），建議20位以上。最後格式化隱藏分區，此時可選擇NTFS作為文件格式，NTFS允許儲存大於4GB的單個文件，如高清晰電影，通常大於4GB。



使用隱藏加密分區；
-------------------------
首先執行TrueCrypt，然後點擊Select File…（如果使用上述方法建立了文件虛擬分區）或SelectDevice…（如果你加密了一個物理分區）。之後點Mount，此時請輸入隱藏分區密碼（非殼分區密碼），隱藏分區將出現在你的我的電腦中，其使用方法與正常的物理分區一樣。

使用普通加密分區
與隱藏分區使用方法一樣，只是要輸入密碼時，輸入殼分區的密碼（而不是隱藏分區的密碼）。但注意，為了防止意外覆蓋隱藏分區數據，輸入密碼前請點 MountOptions…，然後選中Protecthidden volume against damage caused by writing to outer volume，然後輸入隱藏分區密碼。這樣，當操作系統不小心要覆蓋隱藏分區的數據時，TrueCrypt將把整個分區變成只讀，以保護數據。

當然，你被威脅逼迫時，可以交出殼分區的密碼，但否認隱藏分區的存在（不點那個Mount Options…）。別人將看不到隱藏分區的數據，但寫入數據時有可能覆蓋隱藏分區的數據。



提高加密安全系數：
-------------------------
除了使用密碼外，你還應該使用密碼文件。在建立密碼時（包括殼分區和隱藏分區），你可以點Use keyfiles，然後選擇一系列文件作為鑰匙，可以選擇任何mp3、jpg、doc、pdf、zip等文件，但注意如果選擇的文件受到修改，你將永遠無法取回數據。文件選擇的順序不重要，但只有當所有選擇的文件都在時，才能成功解密。你可以把多個文件分發給多個人保管，只有所有人都在場時，數據才得以解密。



其他
-------------------------
你還可以進行更改密碼等操作。詳細的文檔說明可以到TrueCrypt的官方網站察看，http://www.truecrypt.org/docs/。


